import{d as w,u as P,r,o as k,c as C,a as e,b as R,L as q,e as l,w as s,_ as y,f as h,g as A,h as H,i as U,j as $,M as x,p as z,k as B,l as N}from"./index-8f4b240e.js";const D={class:"login-header"},E={class:"operations-container"},F=w({__name:"Header",setup(u){const v=P(),g=()=>{v.updateConfig({showSettingPanel:!0})},b=()=>{window.open("https://github.com/tencent/tdesign-vue-next-starter")},o=()=>{window.open("http://tdesign.tencent.com/starter/docs/get-started")};return(p,m)=>{const i=r("t-icon"),d=r("t-button");return k(),C("header",D,[e(R(q),{class:"logo"}),l("div",E,[e(d,{theme:"default",shape:"square",variant:"text",onClick:b},{default:s(()=>[e(i,{name:"logo-github",class:"icon"})]),_:1}),e(d,{theme:"default",shape:"square",variant:"text",onClick:o},{default:s(()=>[e(i,{name:"help-circle",class:"icon"})]),_:1}),e(d,{theme:"default",shape:"square",variant:"text",onClick:g},{default:s(()=>[e(i,{name:"setting",class:"icon"})]),_:1})])])}}});const G=y(F,[["__scopeId","data-v-8e92a2ff"]]),j={class:"check-container remember-pwd"},J=w({__name:"Login",setup(u){const v={account:"",password:""},g={account:[{required:!0,message:"账号必填",type:"error"}],password:[{required:!0,message:"密码必填",type:"error"}]},b=h(),o=h({...v}),p=h(!1),m=h(!1),i=a=>{var n;const c=`; ${document.cookie}`.split(`; ${a}=`);return c.length===2&&((n=c.pop())==null?void 0:n.split(";").shift())||null},d=(a,t,c)=>{const n=new Date;n.setTime(n.getTime()+c*24*60*60*1e3);const f=`expires=${n.toUTCString()}`;document.cookie=`${a}=${t};${f};path=/`},S=a=>{document.cookie=`${a}=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/`};A(()=>{const a=i("account"),t=i("password");a&&t&&(o.value.account=a,o.value.password=t,m.value=!0)}),H();const T=async a=>{if(a.validateResult===!0)try{o.value.account!==""&&o.value.password==="yepzan"?(localStorage.setItem("username",o.value.account),localStorage.setItem("accessToken","dummy-token"),m.value?(d("account",o.value.account,7),d("password",o.value.password,7)):(S("account"),S("password")),x.success("登录成功"),window.location.href="/series/seriesManage"):x.error("密码错误")}catch(t){console.error("登录过程出错:",t),x.error("登录失败，请重试")}};return(a,t)=>{const c=r("t-icon"),n=r("t-input"),f=r("t-form-item"),V=r("t-checkbox"),L=r("t-button"),M=r("t-form");return k(),U(M,{ref_key:"form",ref:b,class:"item-container",data:o.value,rules:g,"label-width":"0",onSubmit:T},{default:s(()=>[e(f,{name:"account"},{default:s(()=>[e(n,{modelValue:o.value.account,"onUpdate:modelValue":t[0]||(t[0]=_=>o.value.account=_),size:"large",placeholder:"请输入账号:"},{"prefix-icon":s(()=>[e(c,{name:"user"})]),_:1},8,["modelValue"])]),_:1}),e(f,{name:"password"},{default:s(()=>[e(n,{modelValue:o.value.password,"onUpdate:modelValue":t[2]||(t[2]=_=>o.value.password=_),size:"large",type:p.value?"text":"password",clearable:"",placeholder:"请输入登录密码:"},{"prefix-icon":s(()=>[e(c,{name:"lock-on"})]),"suffix-icon":s(()=>[e(c,{name:p.value?"browse":"browse-off",onClick:t[1]||(t[1]=_=>p.value=!p.value)},null,8,["name"])]),_:1},8,["modelValue","type"])]),_:1}),l("div",j,[e(V,{modelValue:m.value,"onUpdate:modelValue":t[3]||(t[3]=_=>m.value=_)},{default:s(()=>[$("记住密码")]),_:1},8,["modelValue"])]),e(f,{class:"btn-container"},{default:s(()=>[e(L,{block:"",size:"large",type:"submit"},{default:s(()=>[$(" 登录 ")]),_:1})]),_:1})]),_:1},8,["data"])}}});const O=y(J,[["__scopeId","data-v-847b195b"]]),I=u=>(z("data-v-d8972b93"),u=u(),B(),u),W={class:"login-wrapper"},K={class:"login-container"},Q=I(()=>l("div",{class:"title-container"},[l("h1",{class:"title margin-no"},"登录到"),l("h1",{class:"title"},"内容管理平台")],-1)),X=I(()=>l("footer",{class:"copyright"},"Copyright @ 2021-2022 Tencent. All Rights Reserved",-1)),Y=w({name:"LoginIndex"}),Z=w({...Y,setup(u){return(v,g)=>(k(),C("div",W,[e(G),l("div",K,[Q,e(O),e(N)]),X]))}});const te=y(Z,[["__scopeId","data-v-d8972b93"]]);export{te as default};
